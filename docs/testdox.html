<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>Test Documentation</title>
        <style>
            body {
                text-rendering: optimizeLegibility;
                font-variant-ligatures: common-ligatures;
                font-kerning: normal;
                margin-left: 2em;
            }

            body > ul > li {
                font-family: Source Serif Pro, PT Sans, Trebuchet MS, Helvetica, Arial;
                font-size: 2em;
            }

            h2 {
                font-family: Tahoma, Helvetica, Arial;
                font-size: 3em;
            }

            ul {
                list-style: none;
                margin-bottom: 1em;
            }
        </style>
    </head>
    <body>
        <h2 id="Tests\Feature\AuthTest">Feature\Auth</h2>
        <ul>
            <li style="color: #555753;">✓ Given an anonymous user when I visit the api paths then I get redirected to the login GET lots</li>
            <li style="color: #555753;">✓ Given an anonymous user when I visit the api paths then I get redirected to the login GET single lot</li>
            <li style="color: #555753;">✓ Given an anonymous user when I visit the api paths then I get redirected to the login GET lot entries</li>
            <li style="color: #555753;">✓ Given an anonymous user when I visit the api paths then I get redirected to the login POST entry</li>
            <li style="color: #555753;">✓ Given an anonymous user when I visit the api paths then I get redirected to the login GET entry</li>
            <li style="color: #555753;">✓ Given an anonymous user when I visit the api paths then I get redirected to the login GET entry price</li>
            <li style="color: #555753;">✓ Given an anonymous user when I visit the api paths then I get redirected to the login PATH entry</li>
        </ul>
        <h2 id="Tests\Feature\EntryTest">Feature\Entry</h2>
        <ul>
            <li style="color: #555753;">✓ Given a logged in user when I request GET /api/entries/:id then it gives me the entry with the expected structure</li>
            <li style="color: #555753;">✓ Given a logged in user when I request PATCH /api/entries/:id then it gives me the updated entry with the expected structure</li>
            <li style="color: #555753;">✓ Given a logged in user when I request GET /api/entries/:id/price then it gives me the price for the entry</li>
            <li style="color: #555753;">✓ Given a correct entry when I request to exit it should return 200</li>
            <li style="color: #555753;">✓ Given a late exit_at when I request to exit it should return 406</li>
        </ul>
        <h2 id="Tests\Feature\ParkingLotTest">Feature\ParkingLot</h2>
        <ul>
            <li style="color: #555753;">✓ Given a logged in user when I request GET /api/lots then it gives me the lots with the expected structure</li>
            <li style="color: #555753;">✓ Given a logged in user when I request GET /api/lots/1 then it gives me the requested lot with the expected structure</li>
            <li style="color: #555753;">✓ Given a logged in user when I request GET /api/lots/1/entries then it gives me the requested lot's entries with the expected structure</li>
            <li style="color: #555753;">✓ Given a logged in user when I request GET /api/lots/1/entries then it gives me the requested lot's entries with the expected structure</li>
        </ul>
        <h2 id="Tests\Unit\Repositories\EntryRepositoryTest">Unit\Repositories\EntryRepository</h2>
        <ul>
            <li style="color: #555753;">✓ Given a DB with 10 items when I ask for all the items then it give a collection of 10 Entry</li>
            <li style="color: #555753;">✓ Given a DB with 10 items when I ask for the item with id 1 then it gives me the correct item</li>
            <li style="color: #555753;">✓ When I ask ask for a non-existing item then it throws the correct exception</li>
            <li style="color: #555753;">✓ Given free space in the lot when I try to insert a new entry then it returns the new entry</li>
            <li style="color: #555753;">✓ Given no free space in the lot when I try to insert a new entry then it throws the correct exception</li>
            <li style="color: #555753;">✓ Given a valid price it should update the entry with the price and payed_at timestamp</li>
            <li style="color: #555753;">✓ Given a valid price and an entry with a price it should not update the entity</li>
            <li style="color: #555753;">✓ Given a valid exit time it should update the entry with the exited_at timestamp</li>
            <li style="color: #555753;">✓ Given a valid exit time and an entry without payed_tim it should not update the entry</li>
        </ul>
        <h2 id="Tests\Unit\Repositories\ParkingLotRepositoryTest">Unit\Repositories\ParkingLotRepository</h2>
        <ul>
            <li style="color: #555753;">✓ Given a DB with 3 items when I ask for all the items then it give a collection of 3 ParkingLot</li>
            <li style="color: #555753;">✓ Given a DB with 3 items when I ask for the item with id 1 then it gives me the correct item</li>
            <li style="color: #555753;">✓ When I ask ask for a non-existing item then it throws the correct exception</li>
        </ul>
        <h2 id="Tests\Unit\Repositories\UserRepositoryTest">Unit\Repositories\UserRepository</h2>
        <ul>
            <li style="color: #555753;">✓ Given 4 non-deleted users in the db when getAll is called then 4 users are returned</li>
            <li style="color: #555753;">✓ Give a non deleted user in the db when getById is called the user is returned</li>
            <li style="color: #555753;">✓ When getById is called for a non existing id then it should throw the correct exception</li>
            <li style="color: #555753;">✓ Given a user with USER role when I upgrade it then it has ADMIN role</li>
            <li style="color: #555753;">✓ Give a user with ADMIN role when I upgrade the it thorws the correct exception</li>
        </ul>
        <h2 id="Tests\Unit\Services\FreeSpotServiceTest">Unit\Services\FreeSpotService</h2>
        <ul>
            <li style="color: #555753;">✓ Given free spots it should return true</li>
            <li style="color: #555753;">✓ Given no free spots it should return false</li>
        </ul>
        <h2 id="Tests\Unit\Services\PriceCalculatorServiceTest">Unit\Services\PriceCalculatorService</h2>
        <ul>
            <li style="color: #555753;">✓ Given a starting date an a fare when I ask for the price then it returns the correct one </li>
            <li style="color: #555753;">✓ Given a starting date an a fare when I ask for the price then it returns the correct one </li>
            <li style="color: #555753;">✓ Given a starting date an a fare when I ask for the price then it returns the correct one </li>
            <li style="color: #555753;">✓ Given a valid entry when I ask for the price then it returns the correct one</li>
            <li style="color: #555753;">✓ Given an entry with a price when I calculate then it throws the correct exception</li>
            <li style="color: #555753;">✓ Given an invalida arrival date when I calculate the price then it thows the correct exception null</li>
            <li style="color: #555753;">✓ Given an invalida arrival date when I calculate the price then it thows the correct exception future date</li>
            <li style="color: #555753;">✓ Given an invalida arrival date when I calculate the price then it thows the correct exception null</li>
            <li style="color: #555753;">✓ Given an invalida arrival date when I calculate the price then it thows the correct exception future date</li>
        </ul>
        <h2 id="Tests\Unit\Services\Validators\CanPayValidatorTest">Unit\Services\Validators\CanPayValidator</h2>
        <ul>
            <li style="color: #555753;">✓ Given payed_at or exited_at not null it should thow and exception payed is not null</li>
            <li style="color: #555753;">✓ Given payed_at or exited_at not null it should thow and exception exited is not null</li>
            <li style="color: #555753;">✓ Given payed_at or exited_at not null it should thow and exception both are not null</li>
        </ul>
        <h2 id="Tests\Unit\Services\Validators\ExitedAtValidatorTest">Unit\Services\Validators\ExitedAtValidator</h2>
        <ul>
            <li style="color: #555753;">✓ Given a date it should return if it's correct or wrong in the right way -2 minutes</li>
            <li style="color: #555753;">✓ Given a date it should return if it's correct or wrong in the right way now</li>
            <li style="color: #555753;">✓ Given a date it should return if it's correct or wrong in the right way +2 minutes</li>
        </ul>
        <h2 id="Tests\Unit\Services\Validators\PayedValidatorTest">Unit\Services\Validators\PayedValidator</h2>
        <ul>
            <li style="color: #555753;">✓ Given payed_at null it should return false payed is not null</li>
            <li style="color: #555753;">✓ Given payed_at null it should return false exited is not null</li>
            <li style="color: #555753;">✓ Given payed_at null it should return false both are not null</li>
        </ul>
        <h2 id="Tests\Unit\Services\Validators\PriceValidatorTest">Unit\Services\Validators\PriceValidator</h2>
        <ul>
            <li style="color: #555753;">✓ Given a price it should return if it's correct or wrong in the right way correct price 1</li>
            <li style="color: #555753;">✓ Given a price it should return if it's correct or wrong in the right way correct price 2</li>
            <li style="color: #555753;">✓ Given a price it should return if it's correct or wrong in the right way correct price 3</li>
            <li style="color: #555753;">✓ Given a price it should return if it's correct or wrong in the right way wrong price 1</li>
            <li style="color: #555753;">✓ Given a price it should return if it's correct or wrong in the right way wrong price 2</li>
            <li style="color: #555753;">✓ Given a price it should return if it's correct or wrong in the right way wrong price 3</li>
        </ul>
        <h2 id="Tests\Unit\Services\Validators\ValidatorFactoryTest">Unit\Services\Validators\ValidatorFactory</h2>
        <ul>
            <li style="color: #555753;">✓ Given a field it returns the correct class </li>
            <li style="color: #555753;">✓ Given a field it returns the correct class </li>
            <li style="color: #555753;">✓ Given a wrong field it throws the correct exception</li>
        </ul>
    </body>
</html>